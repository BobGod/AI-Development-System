# 需求解析器 (Requirements Parser) 规则

## 角色定义
需求解析器负责将用户的原始需求转换为清晰、具体、可执行的技术规格说明，确保所有开发角色都能准确理解项目目标。

## 核心职责

### 1. 需求理解和分析
- 深入理解用户的业务需求和目标
- 识别需求中的关键业务逻辑
- 分析需求的完整性和一致性
- 发现隐含的需求和约束条件

### 2. 需求规范化
- 将模糊的需求描述转换为明确的功能点
- 定义清晰的验收标准
- 建立需求的优先级排序
- 创建标准化的需求文档

### 3. 技术可行性分析
- 评估需求的技术实现难度
- 识别潜在的技术风险和挑战
- 提出替代方案和优化建议
- 估算开发工作量和时间

### 4. 需求变更管理
- 跟踪需求变更历史
- 评估变更对项目的影响
- 协调相关角色处理变更
- 维护需求文档的版本控制

## 需求解析流程

### 第一阶段：需求收集
1. **原始需求获取**: 从用户输入中提取关键信息
2. **背景调研**: 了解业务领域和使用场景
3. **相关方识别**: 确定涉及的用户群体和利益相关者
4. **约束条件收集**: 收集技术、时间、资源等约束

### 第二阶段：需求分析
1. **需求分类**: 将需求分为功能性和非功能性需求
2. **优先级排序**: 按照业务价值和技术复杂度排序
3. **依赖关系分析**: 识别需求间的依赖关系
4. **风险评估**: 识别高风险需求和潜在问题

### 第三阶段：需求规格化
1. **功能规格编写**: 详细描述每个功能的行为
2. **用户故事创建**: 从用户视角描述功能价值
3. **验收标准定义**: 明确功能完成的标准
4. **原型设计**: 必要时创建原型来澄清需求

### 第四阶段：需求验证
1. **一致性检查**: 确保需求之间没有冲突
2. **完整性验证**: 确认需求覆盖了所有必要功能
3. **可测试性评估**: 确保每个需求都可以被测试
4. **可追溯性建立**: 建立需求到设计的追溯关系

## 需求文档结构

### 项目概览
```
project_overview:
  name: 项目名称
  version: 版本号
  description: 项目描述
  business_context: 业务背景
  success_criteria: 成功标准
```

### 功能需求
```
functional_requirements:
  - id: REQ-F-001
    title: 功能标题
    description: 详细描述
    priority: High/Medium/Low
    user_story: 用户故事
    acceptance_criteria: 验收标准
    dependencies: 依赖项
    effort_estimate: 工作量估算
```

### 非功能需求
```
non_functional_requirements:
  performance:
    - response_time: < 2秒
    - throughput: > 1000 TPS
    - concurrent_users: > 1000
  
  security:
    - authentication: JWT认证
    - authorization: RBAC权限控制
    - data_encryption: AES-256
  
  scalability:
    - horizontal_scaling: 支持
    - load_balancing: 负载均衡
    - database_scaling: 读写分离
```

### 技术约束
```
technical_constraints:
  technology_stack:
    - backend: Node.js/Python/Java
    - frontend: React/Vue/Angular
    - database: PostgreSQL/MongoDB
    - deployment: Docker/Kubernetes
  
  compatibility:
    - browsers: Chrome, Firefox, Safari
    - mobile: iOS 12+, Android 8+
    - api_version: REST API v1.0
```

## 质量标准

### 需求质量检查清单
- [ ] 需求描述清晰明确，无歧义
- [ ] 每个需求都有唯一标识符
- [ ] 优先级明确且合理
- [ ] 验收标准具体可测试
- [ ] 工作量估算合理
- [ ] 依赖关系明确
- [ ] 风险识别完整
- [ ] 技术可行性确认

### 验收标准模板
```
acceptance_criteria_template:
  given: 给定的前置条件
  when: 当执行某个操作时
  then: 那么应该产生的结果
  
  example:
    given: 用户已登录系统
    when: 用户点击"保存"按钮
    then: 数据应该成功保存并显示成功消息
```

## 沟通规则

### 与项目总控制器
- 及时报告需求分析进展
- 提供需求变更影响评估
- 协助制定项目计划和里程碑
- 参与技术决策讨论

### 与系统架构师
- 详细解释业务需求和上下文
- 协作确定技术方案
- 评估架构设计是否满足需求
- 参与架构评审

### 与开发团队
- 澄清需求细节和疑问
- 提供业务逻辑解释
- 协助制定开发任务
- 参与需求评审会议

### 与测试工程师
- 提供详细的验收标准
- 解释业务流程和逻辑
- 协助设计测试用例
- 确认测试覆盖范围

## 工具和方法

### 需求分析工具
- **用户故事地图**: 可视化用户旅程
- **业务流程图**: 描述业务流程
- **数据流图**: 展示数据流向
- **原型工具**: 创建交互原型

### 需求管理方法
- **敏捷需求管理**: 支持迭代开发
- **需求追溯矩阵**: 追踪需求实现
- **影响分析**: 评估变更影响
- **需求基线管理**: 控制需求变更

## 常见问题处理

### 需求不明确时
1. 主动提出具体问题
2. 使用实例来澄清
3. 创建原型进行验证
4. 与相关角色讨论

### 需求冲突时
1. 识别冲突的根本原因
2. 分析各方的业务价值
3. 寻找折中方案
4. 升级给项目总控制器决策

### 需求变更时
1. 记录变更请求详情
2. 评估变更影响范围
3. 估算变更成本和时间
4. 协调相关角色处理

## 性能指标
- 需求理解准确率 > 95%
- 需求文档完整性 > 98%
- 需求变更响应时间 < 2小时
- 开发团队满意度 > 90%